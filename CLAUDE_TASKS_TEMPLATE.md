# Claude Code Work Queue Template
## Task Management for Human-Adjacent AI Development

**Generated By**: [Genevieve/Web Claude Instance]  
**Date**: [YYYY-MM-DD HH:MM]  
**Sprint Goal**: [Brief description of what this sprint accomplishes]  
**Project Phase**: [Current development phase]

---

## üìã Active Sprint Tasks

### Task 001: Fix Discovery Process Crash Loop [CRITICAL]
**Status**: pending  
**Type**: standalone  
**Dependencies**: none  
**Files**: `ui/content_main.js`, `data/grid_extractor.js`  
**Estimated Effort**: L (Large - 2+ hours)

**Description**:  
The current discovery process attempts to scroll through the entire collection before starting downloads. This causes browser crashes with large collections (10k+ items) and creates an endless crash-recovery loop.

**Acceptance Criteria**:
- [ ] Download currently visible items before attempting discovery
- [ ] Implement incremental discovery (batch of 50 items, then download)
- [ ] Add crash detection and recovery mechanism
- [ ] Test with collection of 1000+ items without browser crash
- [ ] Progress bar shows meaningful progress during discovery

**Context**:  
See project-plan.md lines 684-695 for detailed analysis. Previous attempts failed because discovery triggered infinite scroll events faster than DOM could handle.

**Reference Files**:
- `project-notes.md` - Discovery implementation notes
- `DomAnalysisResults/` - DOM structure analysis

**Progress Notes**:
[To be updated by working Claude Code instance]

---

### Task 002: Implement Per-Item JSON Files [HIGH]  
**Status**: pending  
**Type**: sequential  
**Dependencies**: Task 001 (file organization must be stable first)  
**Files**: `data/json_generator.js`, `core/file_organizer.js`  
**Estimated Effort**: M (Medium - 1-2 hours)

**Description**:  
Generate individual JSON files for each rescued item to provide redundancy and enable future validation UI. Each item should have: thumbnail, full-res image, and complete metadata in matching filename pattern.

**Acceptance Criteria**:
- [ ] Generate `[CollectionName]_item_[000001].json` for each item
- [ ] Include all metadata: prompt, dimensions, timestamps, generator info
- [ ] File naming matches image files exactly (same prefix)
- [ ] Master collection JSON still generated (dual redundancy)
- [ ] Individual JSONs work with collection viewer generator

**Context**:  
User feedback indicates artists need granular file access for validation and future browsing features. Individual JSONs also provide recovery options if master file corrupts.

**Progress Notes**:
[Updates from working instance]

---

### Task 003: Fix File Naming Consistency [MEDIUM]
**Status**: pending  
**Type**: standalone  
**Files**: `core/file_organizer.js`, `core/background_main.js`  
**Estimated Effort**: S (Small - 30min-1hour)

**Description**:  
Downloaded thumbnails currently have inconsistent naming between actual files and JSON references. All thumbnails downloading as "OUG.jpg" instead of proper item-specific names.

**Acceptance Criteria**:
- [ ] Thumbnail files named: `[CollectionName]_item_[000001]_thumbnail.jpg`
- [ ] Full-res files named: `[CollectionName]_item_[000001]_[1024x1024].jpg`
- [ ] JSON references match actual downloaded filenames exactly
- [ ] File organization follows specified directory structure
- [ ] Test with multiple items to ensure no naming conflicts

**Context**:  
This is blocking user validation because they can't identify which JSON entries correspond to which image files.

**Progress Notes**:
[Instance updates here]

---

### Task 004: Panel Auto-Slide Enhancement [LOW]
**Status**: pending  
**Type**: standalone  
**Files**: `ui/ui_manager.js`  
**Estimated Effort**: S (Small - 30 minutes)

**Description**:  
During backup process, the UI panel should automatically slide to center to avoid being covered by browser download notifications.

**Acceptance Criteria**:
- [ ] Panel slides to center when backup starts
- [ ] Panel slides back to right edge when backup completes  
- [ ] Smooth CSS transition animations
- [ ] Panel position persists if user manually moves it
- [ ] Works on different screen sizes

**Context**:  
Quality-of-life improvement. Current panel position gets obscured by download notification stack.

**Progress Notes**:
[Working instance notes]

---

## üö´ Blocked Items Needing PM Decision

### Task 005: Opera Browser Compatibility [DECISION NEEDED]
**Status**: blocked  
**Blocked By**: claude-code-alpha-2025-01-14-1200  
**Blocking Issue**: Need PM priority decision  

**Description**:  
Opera browser has compatibility issues with current extension. Chrome works perfectly.

**Decision Needed**:
- Should we prioritize Opera support or focus Chrome development?
- Is Opera support critical for user base?
- Time investment: 4-6 hours to make Opera fully compatible

**Current State**:
- Chrome: 100% functional
- Opera: 60% functional, needs major refactoring
- Edge: Not yet tested

**Recommendation**: Suggest Chrome-first approach, Opera as Phase 2

---

## üìä Sprint Metrics

| Metric | Target | Current |
|--------|--------|---------|
| Total Tasks | 5 | 4 active, 1 blocked |
| Critical Items | 1 | 1 pending |
| Parallel-Safe Tasks | 3 | Tasks 001, 003, 004 |
| Sequential Tasks | 1 | Task 002 |
| Estimated Total Effort | ~6 hours | Pending start |

---

## üéØ Sprint Success Criteria

**Must Have** (Sprint cannot complete without these):
- [ ] Discovery process fixed and stable
- [ ] File naming consistency resolved
- [ ] Per-item JSON generation working

**Should Have** (Important for user experience):
- [ ] Panel auto-slide implemented
- [ ] All items tested with real collection

**Could Have** (Nice to have if time permits):
- [ ] Opera compatibility decision made
- [ ] Performance testing with 5k+ items

---

## üìù Notes for Claude Code Instances

### Getting Started:
1. Read project-plan.md and project-notes.md first (REQUIRED)
2. Choose a task marked as 'standalone' for parallel work
3. Update this file immediately when claiming a task
4. Test all changes with actual browser extension loaded

### Working Tips:
- Use 'Sherlock' debug mode for detailed logging
- Screenshot UI changes for documentation
- Browser console shows content script logs
- Service worker console shows background script logs

### When Blocked:
- Document exactly what you tried
- Include error messages and console output
- Suggest alternative approaches
- Look for other tasks you can work on instead

### Completion Protocol:
- Update project-plan.md with progress
- Update project-notes.md with discoveries
- Mark task complete with summary
- If last task, generate SPRINT_COMPLETE file

---

## üéâ Celebration Zone

*This space reserved for victory laps, ASCII art, and team appreciation when tasks complete!*

---

**Template Version**: 1.0  
**Last Updated**: [Auto-updated by working instances]  
**Next PM Review**: [When all tasks complete or daily standup]

---

## Example: Task in Progress

### Task 001: Fix Discovery Process Crash Loop [CRITICAL]
**Status**: in-progress  
**Claimed By**: claude-code-beta-2025-01-15-1430  
**Started At**: 2025-01-15 14:30:00  
**Type**: standalone  

**Progress Notes**:
*2025-01-15 14:35* - Analyzed current discovery code in grid_extractor.js line 127  
*2025-01-15 14:45* - Identified issue: `infiniteScroll()` triggers faster than DOM updates  
*2025-01-15 14:50* - Implementing batch approach: process 50 items, then scroll for next 50  
*2025-01-15 15:00* - Added `downloadBeforeDiscovery` flag to prevent crash loop  
*2025-01-15 15:15* - Testing with 200-item collection... SUCCESS! No crashes  

**Current Solution**:
Modified discovery to use incremental approach instead of scroll-all-first. Details in commit 7a3b9c2.

**Next Steps**:
- Test with 1000+ item collection
- Add progress indicators for discovery phase
- Update acceptance criteria checklist

---

## Example: Completed Task

### Task 003: Fix File Naming Consistency [COMPLETED] ‚úÖ
**Status**: complete  
**Completed By**: claude-code-gamma-2025-01-15-1545  
**Completed At**: 2025-01-15 15:45:00  

**Solution Summary**:
Fixed file naming in `background_main.js` line 89. Issue was hardcoded "OUG.jpg" instead of dynamic naming template. Now uses proper `${collectionName}_item_${itemId}_thumbnail.jpg` pattern.

**Files Modified**:
- `core/background_main.js` - Fixed download filename generation
- `core/file_organizer.js` - Updated naming template helper function

**Tested**:
- Downloaded 10 items from test collection
- Verified JSON references match actual filenames
- Confirmed directory structure follows specification

**Achievement**: File naming now 100% consistent! üéâ

---

*Ready for action! üöÄ*